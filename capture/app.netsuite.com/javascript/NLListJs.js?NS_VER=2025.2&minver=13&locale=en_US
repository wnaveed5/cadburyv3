var NLListMachineOptions=new function(){var a={};var b=function(){this.lastSortCol=-1;this.lastSortOrder=true;this.lastSortDataType="TEXT";this.currentSortCol=-1;this.currentSortOrder=true;this.currentSortDataType="TEXT";this.updateSortOptions=function(d,c,e){if(this.currentSortCol==-1){this.currentSortCol=d;}if(this.currentSortCol!=d){this.lastSortCol=this.currentSortCol;this.lastSortOrder=this.currentSortOrder;this.lastSortDataType=this.currentSortDataType;}this.currentSortCol=d;this.currentSortOrder=c;this.currentSortDataType=e;};};this.get=function(c){if(!a.hasOwnProperty(c)){a[c]=new b();}return a[c];};};function l_node(c,g,f,i,d,e,a,j,b){this.html=c;var h=NS.jQuery("<span>"+c+"</span>").find("input[type=text]:first");if(h.length>0){this.name=h.val();}else{this.name=c.indexOf(">")==-1?c:c.substring(c.indexOf(">")+1,c.indexOf("</"));}this.name=trim(this.name);this.row=g;this.dir_up=i;this.hier=d?d:"";this.type=f;if(e!=null&&e.length>0){this.html2=e;this.name2=e.indexOf(">")==-1?e:e.substring(e.indexOf(">")+1,e.indexOf("</"));this.name2=trim(this.name2);this.type2=a;this.dir_up2=j;}this.linenum=b;}function l_isBlank(a){return(a=="&nbsp;"||a=="");}function l_sortnodes(c,b){var a=l_sortnodes2(c.name,b.name,c.type)*(c.dir_up?1:-1);if(a==0&&c.type2!=null&&b.type2!=null){return l_sortnodes2(c.name2,b.name2,c.type2)*(c.dir_up2?1:-1);}else{return a;}}function l_sortnodes2(a,b,c){if(c.indexOf("CURRENCY")!=-1||c=="INTEGER"||c=="FLOAT"||c=="POSFLOAT"||c=="PERCENT"||c=="NUMERICKEY"){return l_numnodes(a,b,c);}else{if(c=="PRIORITY"){return l_prioritynodes(a,b);}else{if(c=="DATE"||c=="MMYYDATE"||c=="DATETIME"){return l_datenodes(a,b,c=="DATETIME");}else{if(c=="TIMEOFDAY"){return l_timenodes(a,b);}else{return l_charnodes(a,b);}}}}}function l_charnodes(d,c){if(l_isBlank(d)||l_isBlank(c)){var b=l_isBlank(d);var a=l_isBlank(c);return(b&&!a)?1:((a&&!b)?-1:0);}else{return d.toLowerCase().localeCompare(c.toLowerCase());}}function l_numnodes(a,d,b){var e=l_num(a,b);var c=l_num(d,b);return e<c?-1:(e==c?0:1);}function l_getpriority(a){var b=a.toLowerCase();if(b.charAt(0)=="l"){return 30;}else{if(b.charAt(0)=="m"){return 20;}else{if(b.charAt(0)=="h"){return 10;}}}}function l_prioritynodes(a,c){var d=l_getpriority(a);var b=l_getpriority(c);return d<b?-1:(d==b?0:1);}function l_datenodes(a,c,e){var d;var b;d=stringtodate(a).getTime();b=stringtodate(c).getTime();if(isNaN(d)){return 1;}else{if(isNaN(b)){return -1;}else{return(d<b)?-1:(d==b?0:1);}}}function l_timenodes(a,c){var d=new Date();var b=d;d=l_time(a,d);b=l_time(c,b);return d<b?-1:(d==b?0:1);}function l_time(g,d){var f=/([0-9][0-9]?)(:[0-5][0-9])\s?([AaPp])?[Mm]?/;var a=f.exec(g);var b=parseInt(RegExp.$1);var e=parseInt(RegExp.$2.substr(1));var c=(RegExp.$3.length==0||RegExp.$3.toUpperCase()=="A")?"am":"pm";b=(c=="pm")?(b%12)+12:b%12;return b*60+e;}function l_num(a,b){a=a.replace(window.number_blacklist_regex,"");a=a.replace(window.decimalseparator,".");var d=window.negativeprefix.length;var c=window.negativesuffix.length;if((d>0&&a.substring(0,d)==window.negativeprefix)||(c>0&&a.substring(a.length-c,a.length)==window.negativesuffix)){a="-"+a.substring(d,a.length-c);}if(isNaN(a)||a==""){a=(b=="INTEGER")?"0":"0.0";}return(b=="INTEGER")?parseInt(a):parseFloat(a);}function l_elem(b){var a=getBodyForm();if((typeof a!="undefined")&&(typeof a.elements!="undefined")){return a.elements[b];}return null;}function l_sort(g,L,q,F,d,m,r,B){if(r!=null){L=r;}var w,s,x=0,t,a=-1,c;var h=[],G,p;var o=true,y;var l=false;var E=getBodyForm();if(d==""||d==null){d="";}else{if(l_elem(d+"sortidx")!=null){a=E.elements[d+"sortidx"].value;if(a==g){a=-1;}else{c=E.elements[d+"sorttype"].value;y=E.elements[d+"sortdir"].value=="UP";}l=hasEncodedField(d,d+"seqnum");}}w=document.getElementById(d+"dir"+g);if(w.className.indexOf("up")!=-1){o=false;}w.className="listheadersort"+(o?"up":"down");s=document.getElementById(d+"header");for(var K=0;K<s.cells.length;K++){if(K==g){continue;}w=document.getElementById(d+"dir"+K);if(w!=null){w.className="listheadersort";}}var u=NLListMachineOptions.get(d);u.updateSortOptions(g,o,L);if(a==-1){a=u.lastSortCol;y=u.lastSortOrder;c=u.lastSortDataType;}var A=false;if(typeof B!="undefined"){w=document.getElementById(d+"row0");if(w!=null){var z=w.cells;if(typeof z!="undefined"){for(var n=0;n<z.length;n++){var e=z[n].children[0];if((typeof e!="undefined")&&e.getAttribute("type")=="hidden"){A=true;break;}}}}}var J=A?B:g;var I=0;while(true){w=document.getElementById(d+"row"+I);if(w!=null){if(r!=null){G=w.cells[J].firstChild.innerHTML;}else{G=w.cells[J].innerHTML;}p=[];if(q){var v=l_elem("_hier"+I);if(F){G=v.value;}h[I]=new l_node(G.toLowerCase(),p,L,o,v.value);}else{if(a!=-1){h[I]=new l_node(G.toLowerCase(),p,L,o,null,w.cells[a].innerHTML,c,y,l?findEncodedValue(d,d+"seqnum",I+1):-1);}else{h[I]=new l_node(G.toLowerCase(),p,L,o,null,null,null,null,l?findEncodedValue(d,d+"seqnum",I+1):-1);}}h[I].id=d+"row"+I;I++;}else{break;}}x=I;if(x>1){h.sort(l_sortnodes);var b=document.getElementById(d+"row0");var f=null;for(var H=(x-1);H>=0;--H){t=h[H];h[H].hasHighLight=(H%2);if(q){v=l_elem("_hier"+H);v.value=t.hier;}if(l){setEncodedValue(d,t.linenum,d+"seqnum",H+1);}f=document.getElementById(t.id);if(f!=b){f.parentNode.insertBefore(f,b);}b=f;}var C=l_copyClassnamesToArray(document.getElementById(d+"row0"));var D=l_copyClassnamesToArray(document.getElementById(d+"row1"));var k=((f.cells.length>0)&&((f.cells[0].className.indexOf("listtext")>=0)||(f.cells[0].className.indexOf("portlettext")>=0)));for(var I=0;I<x;++I){f.id=d+"row"+I;if(k){setUnsetHighlight(I,h,f,C,D);}f=f.nextSibling;}}l_saveprefs(d,g,m,L,o);}function setUnsetHighlight(d,b,a,f,e){for(var c=0;c<a.cells.length;++c){if(b[d].hasHighLight){a.cells[c].className=e[c];}else{a.cells[c].className=f[c];}}}function l_copyClassnamesToArray(a){var c=new Array(a.cells.length);for(var b=0;b<c.length;++b){c[b]=a.cells[b].className;}return c;}function l_sortprefs(a,f,b,e){var d=true;var c=document.getElementById(b+"dir"+a);if(c.className.indexOf("up")!=-1){d=false;}l_saveprefs(b,a,e,f,d);}function l_saveprefs(c,b,e,f,d){var a=getBodyForm();if(c!=null&&c.length>0&&(l_elem(c+"sortidx")!=null)){if(a.elements[c+"sortname"].value!=e){a.elements[c+"sort2name"].value=a.elements[c+"sortname"].value;a.elements[c+"sort2dir"].value=a.elements[c+"sortdir"].value;}a.elements[c+"sortidx"].value=b;a.elements[c+"sortname"].value=e;a.elements[c+"sorttype"].value=f;a.elements[c+"sortdir"].value=d?"UP":"DOWN";}}function l_bold(d,c,b){var e=document.getElementById(d+"row"+b);for(var a=0;a<e.cells.length;a++){var f=e.cells[a].className;if(c&&f.indexOf("texttable")!=-1){f="textdark"+f.substring(f.indexOf("texttable")+9);}else{if(!c&&f.indexOf("textdark")!=-1){f="texttable"+f.substring(f.indexOf("textdark")+8);}}e.cells[a].className=f;}}function getBodyForm(){return document.forms.body_actions;}function getFooterActionsForm(){return document.forms.footer_actions_form;}