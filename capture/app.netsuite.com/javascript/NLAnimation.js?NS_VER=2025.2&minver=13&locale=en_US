var E_ANIMATION_COMPLETE=0;var E_ANIMATION_CANCEL=0;var CSS_HEIGHT="height";var CSS_WIDTH="width";var CSS_TOP="top";var CSS_LEFT="left";var CSS_OPACITY="opacity";var TRANSITION_ELEM="elem";var TRANSITION_ATTR="attr";var TRANSITION_TRANSFORMER="transformer";var TRANSITION_UPDATER="updater";var TRANSITION_INIT_VAL="initVal";var TRANSITION_TARGET_VAL="targetVal";function nlGetHeightAnimation(a,e,d,b,i,g,h){var c=new NLAnimation(a,b,i);var f=new nlGetSizePosTransition(a,CSS_HEIGHT,e,d,g,h);c.addTransition(f);return c;}function nlGetWidthAnimation(a,e,d,b,i,g,h){var c=new NLAnimation(a,b,i);var f=new nlGetSizePosTransition(a,CSS_WIDTH,e,d,g,h);c.addTransition(f);return c;}function nlGetPositionAnimation(a,i,h,g,e,c,f,j,k){var b=new NLAnimation(a,c,onComplete);var d=new nlGetSizePosTransition(a,CSS_TOP,i,g,f,j);b.addTransition(d);d=new nlGetSizePosTransition(a,CSS_LEFT,h,e,f,j);b.addTransition(d);return b;}function nlGetSizeAnimation(a,j,e,h,d,c,g,i,k){var b=new NLAnimation(a,c,onComplete);var f=new nlGetSizePosTransition(a,CSS_TOP,j,h,g,i);b.addTransition(f);f=new nlGetSizePosTransition(a,CSS_LEFT,e,d,g,i);b.addTransition(f);return b;}function nlGetOpacityAnimation(a,e,d,b,g,h,i){var c=new NLAnimation(obj,b,onComplete);var f=new nlGetSizePosTransition(a,CSS_OPACITY,e,d,g,h);c.addTransition(f);return c;}function nlGetSizePosTransition(f,d,b,e,a,g){if(!a){a=NLAnimationTransformer.linear;}if(!g){g=NLAnimationUpdater.height;}var c={};c[TRANSITION_ELEM]=f;c[TRANSITION_ATTR]=d;c[TRANSITION_TRANSFORMER]=a;c[TRANSITION_UPDATER]=g;c[TRANSITION_INIT_VAL]=parseInt(b);c[TRANSITION_TARGET_VAL]=parseInt(e);return new NLAnimationTransition(c);}function nlGetOpacityTransition(f,d,b,e,a,g){if(!a){a=NLAnimationTransformer.linear;}if(!g){g=NLAnimationUpdater.height;}var c={};c[TRANSITION_ELEM]=f;c[TRANSITION_ATTR]=d;c[TRANSITION_TRANSFORMER]=a;c[TRANSITION_UPDATER]=g;c[TRANSITION_INIT_VAL]=b;c[TRANSITION_TARGET_VAL]=e;return new NLAnimationTransition(c);}function NLAnimation(a,b,c){this.id=new Date().getTime();if(!window.nlAnimations){window.nlAnimations=[];}window.nlAnimations[this.id]=this;this.elem=a;this.duration=b;this.callback=c;this.timeElapsed=0;this.updateInterval=20;this.transitions=[];this.timer=null;return this;}NLAnimation.prototype.addTransition=function addTransition(a){if(!a||!a[TRANSITION_ELEM]||!a[TRANSITION_TARGET_VAL]||!a[TRANSITION_UPDATER]){return null;}var b=new NLAnimationTransition(a);if(b){this.transitions[this.transitions.length]=b;}return b;};NLAnimation.prototype.start=function NLAnimation_start(){this.timeElapsed=0;this.timer=setTimeout(function(){this.run();}.bind(this),0);};NLAnimation.prototype.run=function NLAnimation_run(){var a=0;if(this.duration<=0||this.updateInterval==0){a=1;}else{a=this.timeElapsed*1/this.duration;this.timeElapsed+=this.updateInterval;}for(var b=0;b<this.transitions.length;b++){this.transitions[b].update(a);}if(a>=1){this.timer=null;this.onComplete();}else{this.timer=setTimeout(function(){this.run();}.bind(this),this.updateInterval);}};NLAnimation.prototype.stop=function NLAnimation_stop(){if(!this.timer){return;}clearTimeout(this.timer);this.timer=null;if(this.callback){this.callback(E_ANIMATION_CANCEL,this.elem,this);}};NLAnimation.prototype.onComplete=function NLAnimation_onComplete(){if(this.callback){this.callback(E_ANIMATION_COMPLETE,this.elem,this);}};function NLAnimationTransition(a){this.elem=a[TRANSITION_ELEM];this.updater=a[TRANSITION_UPDATER];if(a[TRANSITION_TRANSFORMER]==null){this.transformer=a[TRANSITION_TRANSFORMER];}else{this.transformer=NLAnimationTransformer.linear;}if(a[TRANSITION_INIT_VAL]){this.initVal=a[TRANSITION_INIT_VAL];}else{this.initVal=this.updater.getVal(this.elem);}this.targetVal=a[TRANSITION_TARGET_VAL];return this;}NLAnimationTransition.prototype.update=function NLAnimationTransition_update(a){var b=this.transformer.transform(a);this.updater.updateVal(this.elem,this.initVal,this.targetVal,b);};function NLAnimationUpdaterBase(b,a){this.attrName=b;this.unitStr=a;}NLAnimationUpdaterBase.prototype.getVal=function NLAnimationUpdaterBase_getVal(a){if(!this.attrName){return null;}return parseFloat(getRuntimeStyle(a,this.attrName));};NLAnimationUpdaterBase.prototype.calculateVal=function NLAnimationUpdaterBase_calculateVal(a,b,c){return a+(b-a)*c;};NLAnimationUpdaterBase.prototype.updateVal=function NLAnimationUpdaterBase_updateVal(d,a,b,c){if(!this.attrName){return;}d.style[this.attrName]=this.calculateVal(a,b,c)+(this.unitStr?this.unitStr:"");};function NLAnimationSizePosUpdater(a){this.attrName=a;this.unitStr="px";}NLAnimationSizePosUpdater.prototype=new NLAnimationUpdaterBase();NLAnimationSizePosUpdater.prototype.calculateVal=function NLAnimationSizePosUpdater_calculateVal(a,b,c){return Math.round(a+(b-a)*c);};function NLAnimationOpacityUpdater(){this.attrName=CSS_OPACITY;this.unitStr="";}NLAnimationOpacityUpdater.prototype=new NLAnimationUpdaterBase();NLAnimationOpacityUpdater.prototype.getVal=function NLAnimationOpacityUpdater_getVal(a){return parseFloat(getRuntimeStyle(a,this.attrName));};NLAnimationOpacityUpdater.prototype.updateVal=function NLAnimationOpacityUpdater_updateVal(d,a,b,c){if(!this.attrName){return;}var e=this.calculateVal(a*100,b*100,c);setObjectOpacity(e);};var NLAnimationUpdater={height:new NLAnimationSizePosUpdater(CSS_HEIGHT),width:new NLAnimationSizePosUpdater(CSS_WIDTH),top:new NLAnimationSizePosUpdater(CSS_TOP),left:new NLAnimationSizePosUpdater(CSS_LEFT),opacity:new NLAnimationOpacityUpdater()};var NLAnimationTransformer={linear:{transform:function(a){return a;}},easeIn:{transform:function(a){return a*a;}},easeOut:{transform:function(a){return 1-(a-1)*(a-1);}},easeInEaseOut:{transform:function(a){return 3*a*a-2*a*a*a;}}};